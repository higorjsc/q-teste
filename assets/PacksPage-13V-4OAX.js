import{_ as Y,I as re,a as ne,b as oe,c as ae,d as ie,x as ce,H as le,e as de,f as ue,y as he,J as pe,K as me,r as E,o as w,h as W,w as $,i as k,p as Q,t as b,k as _,z as A,l as S,n as m,L as N,D as O,M as fe,A as we,N as ge,E as ye,F as ve,G as be}from"./index-FvCZzgjW.js";const Pe={name:"vue-base-card",components:{IonCard:re,IonCardHeader:ne,IonCardTitle:oe,IonCardContent:ae,IonIcon:ie},props:{idProp:{type:String,default:"0"},valuesProp:{type:Object,default:()=>({})}},emits:["exportar-logs","importar-logs","open-logs","deletar-card","configurar-card"],data(){return{trashBin:ce,open:le,chevronDownOutline:de,chevronForwardOutline:ue,settingsOutline:he,download:pe,logOut:me,showRows:!1}},methods:{exportar(){this.$emit("exportar-logs",this.idProp)},openLogs(){this.$emit("open-logs",this.idProp)},configurarCard(){this.$emit("configurar-card",this.idProp)},deletarCard(){this.$emit("deletar-card",this.idProp)},toggleShowRows(){this.showRows=!this.showRows}}},Ce={class:"pack-card-content-container"},ke={class:"pack-card-content-parametros-container"},_e={key:0},Ee={class:"secound-row"},Le={key:1},Se={class:"first-row"},Oe={key:2},xe={class:"first-row"},$e={key:3},Fe={class:"first-row"},Re={key:0,class:"icon-main-container"},je={class:"button-container"},Ae={class:"icon-container"};function Ie(t,e,s,o,r,n){const i=E("IonIcon"),a=E("IonCardTitle"),l=E("IonCardHeader"),u=E("IonCardContent"),g=E("IonCard");return w(),W(g,{id:s.idProp,onClick:e[5]||(e[5]=c=>n.openLogs())},{default:$(()=>[k(l,null,{default:$(()=>[k(a,null,{default:$(()=>[Q(b(s.valuesProp.title)+" ",1),r.showRows?S("",!0):(w(),_("span",{key:0,onClick:e[0]||(e[0]=A((...c)=>n.toggleShowRows&&n.toggleShowRows(...c),["stop"]))},[k(i,{icon:r.chevronForwardOutline},null,8,["icon"])])),r.showRows?(w(),_("span",{key:1,onClick:e[1]||(e[1]=A((...c)=>n.toggleShowRows&&n.toggleShowRows(...c),["stop"]))},[k(i,{icon:r.chevronDownOutline},null,8,["icon"])])):S("",!0)]),_:1})]),_:1}),k(u,null,{default:$(()=>[m("div",Ce,[m("div",ke,[r.showRows?(w(),_("p",_e,[m("span",Ee," ESR: "+b(t.$t("".concat(this.valuesProp.esrSelect,"OptionEsr"))),1)])):S("",!0),r.showRows?(w(),_("p",Le,[m("span",Se," Jw: "+b(t.$t("".concat(this.valuesProp.jwMetodo,"OptionJw"))),1)])):S("",!0),r.showRows?(w(),_("p",Oe,[m("span",xe," RQD: "+b(t.$t("".concat(this.valuesProp.rqdMetodo,"OptionRqd"))),1)])):S("",!0),r.showRows?(w(),_("p",$e,[m("span",Fe," SRF: "+b(t.$t("".concat(this.valuesProp.srfMetodo,"OptionSrf"))),1)])):S("",!0)]),r.showRows?(w(),_("div",Re,[m("div",je,[m("button",{id:"import-button",onClick:e[2]||(e[2]=A(c=>n.exportar(),["stop"]))},b(t.$t("export")),1)]),m("div",Ae,[k(i,{class:"configurar-card",icon:r.settingsOutline,onClick:e[3]||(e[3]=A(c=>n.configurarCard(),["stop"]))},null,8,["icon"]),k(i,{class:"trash-bin",icon:r.trashBin,onClick:e[4]||(e[4]=A(c=>n.deletarCard(),["stop"]))},null,8,["icon"])])])):S("",!0)])]),_:1})]),_:1},8,["id"])}const Te=Y(Pe,[["render",Ie],["__scopeId","data-v-d04b2bd2"]]);/*! Capacitor: https://capacitorjs.com/ - MIT License */var R;(function(t){t.Unimplemented="UNIMPLEMENTED",t.Unavailable="UNAVAILABLE"})(R||(R={}));class J extends Error{constructor(e,s,o){super(e),this.message=e,this.code=s,this.data=o}}const De=t=>{var e,s;return t!=null&&t.androidBridge?"android":!((s=(e=t==null?void 0:t.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||s===void 0)&&s.bridge?"ios":"web"},Ue=t=>{const e=t.CapacitorCustomPlatform||null,s=t.Capacitor||{},o=s.Plugins=s.Plugins||{},r=()=>e!==null?e.name:De(t),n=()=>r()!=="web",i=c=>{const d=u.get(c);return!!(d!=null&&d.platforms.has(r())||a(c))},a=c=>{var d;return(d=s.PluginHeaders)===null||d===void 0?void 0:d.find(U=>U.name===c)},l=c=>t.console.error(c),u=new Map,g=(c,d={})=>{const U=u.get(c);if(U)return console.warn('Capacitor plugin "'.concat(c,'" already registered. Cannot register plugins twice.')),U.proxy;const L=r(),x=a(c);let v;const ee=async()=>(!v&&L in d?v=typeof d[L]=="function"?v=await d[L]():v=d[L]:e!==null&&!v&&"web"in d&&(v=typeof d.web=="function"?v=await d.web():v=d.web),v),te=(h,p)=>{var y,P;if(x){const C=x==null?void 0:x.methods.find(f=>p===f.name);if(C)return C.rtype==="promise"?f=>s.nativePromise(c,p.toString(),f):(f,q)=>s.nativeCallback(c,p.toString(),f,q);if(h)return(y=h[p])===null||y===void 0?void 0:y.bind(h)}else{if(h)return(P=h[p])===null||P===void 0?void 0:P.bind(h);throw new J('"'.concat(c,'" plugin is not implemented on ').concat(L),R.Unimplemented)}},B=h=>{let p;const y=(...P)=>{const C=ee().then(f=>{const q=te(f,h);if(q){const V=q(...P);return p=V==null?void 0:V.remove,V}else throw new J('"'.concat(c,".").concat(h,'()" is not implemented on ').concat(L),R.Unimplemented)});return h==="addListener"&&(C.remove=async()=>p()),C};return y.toString=()=>"".concat(h.toString(),"() { [capacitor code] }"),Object.defineProperty(y,"name",{value:h,writable:!1,configurable:!1}),y},K=B("addListener"),G=B("removeListener"),se=(h,p)=>{const y=K({eventName:h},p),P=async()=>{const f=await y;G({eventName:h,callbackId:f},p)},C=new Promise(f=>y.then(()=>f({remove:P})));return C.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await P()},C},H=new Proxy({},{get(h,p){switch(p){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return x?se:K;case"removeListener":return G;default:return B(p)}}});return o[c]=H,u.set(c,{name:c,proxy:H,platforms:new Set([...Object.keys(d),...x?[L]:[]])}),H};return s.convertFileSrc||(s.convertFileSrc=c=>c),s.getPlatform=r,s.handleError=l,s.isNativePlatform=n,s.isPluginAvailable=i,s.registerPlugin=g,s.Exception=J,s.DEBUG=!!s.DEBUG,s.isLoggingEnabled=!!s.isLoggingEnabled,s},qe=t=>t.Capacitor=Ue(t),D=qe(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),j=D.registerPlugin;class z{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,s){let o=!1;this.listeners[e]||(this.listeners[e]=[],o=!0),this.listeners[e].push(s);const n=this.windowListeners[e];n&&!n.registered&&this.addWindowListener(n),o&&this.sendRetainedArgumentsForEvent(e);const i=async()=>this.removeListener(e,s);return Promise.resolve({remove:i})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,s,o){const r=this.listeners[e];if(!r){if(o){let n=this.retainedEventArguments[e];n||(n=[]),n.push(s),this.retainedEventArguments[e]=n}return}r.forEach(n=>n(s))}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,s){this.windowListeners[s]={registered:!1,windowEventName:e,pluginEventName:s,handler:o=>{this.notifyListeners(s,o)}}}unimplemented(e="not implemented"){return new D.Exception(e,R.Unimplemented)}unavailable(e="not available"){return new D.Exception(e,R.Unavailable)}async removeListener(e,s){const o=this.listeners[e];if(!o)return;const r=o.indexOf(s);this.listeners[e].splice(r,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const s=this.retainedEventArguments[e];s&&(delete this.retainedEventArguments[e],s.forEach(o=>{this.notifyListeners(e,o)}))}}const X=t=>encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),Z=t=>t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class Ve extends z{async getCookies(){const e=document.cookie,s={};return e.split(";").forEach(o=>{if(o.length<=0)return;let[r,n]=o.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");r=Z(r).trim(),n=Z(n).trim(),s[r]=n}),s}async setCookie(e){try{const s=X(e.key),o=X(e.value),r="; expires=".concat((e.expires||"").replace("expires=","")),n=(e.path||"/").replace("path=",""),i=e.url!=null&&e.url.length>0?"domain=".concat(e.url):"";document.cookie="".concat(s,"=").concat(o||"").concat(r,"; path=").concat(n,"; ").concat(i,";")}catch(s){return Promise.reject(s)}}async deleteCookie(e){try{document.cookie="".concat(e.key,"=; Max-Age=0")}catch(s){return Promise.reject(s)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const s of e)document.cookie=s.replace(/^ +/,"").replace(/=.*/,"=;expires=".concat(new Date().toUTCString(),";path=/"))}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}j("CapacitorCookies",{web:()=>new Ve});const Me=async t=>new Promise((e,s)=>{const o=new FileReader;o.onload=()=>{const r=o.result;e(r.indexOf(",")>=0?r.split(",")[1]:r)},o.onerror=r=>s(r),o.readAsDataURL(t)}),Be=(t={})=>{const e=Object.keys(t);return Object.keys(t).map(r=>r.toLocaleLowerCase()).reduce((r,n,i)=>(r[n]=t[e[i]],r),{})},He=(t,e=!0)=>t?Object.entries(t).reduce((o,r)=>{const[n,i]=r;let a,l;return Array.isArray(i)?(l="",i.forEach(u=>{a=e?encodeURIComponent(u):u,l+="".concat(n,"=").concat(a,"&")}),l.slice(0,-1)):(a=e?encodeURIComponent(i):i,l="".concat(n,"=").concat(a)),"".concat(o,"&").concat(l)},"").substr(1):null,Je=(t,e={})=>{const s=Object.assign({method:t.method||"GET",headers:t.headers},e),r=Be(t.headers)["content-type"]||"";if(typeof t.data=="string")s.body=t.data;else if(r.includes("application/x-www-form-urlencoded")){const n=new URLSearchParams;for(const[i,a]of Object.entries(t.data||{}))n.set(i,a);s.body=n.toString()}else if(r.includes("multipart/form-data")||t.data instanceof FormData){const n=new FormData;if(t.data instanceof FormData)t.data.forEach((a,l)=>{n.append(l,a)});else for(const a of Object.keys(t.data))n.append(a,t.data[a]);s.body=n;const i=new Headers(s.headers);i.delete("content-type"),s.headers=i}else(r.includes("application/json")||typeof t.data=="object")&&(s.body=JSON.stringify(t.data));return s};class We extends z{async request(e){const s=Je(e,e.webFetchExtra),o=He(e.params,e.shouldEncodeUrlParams),r=o?"".concat(e.url,"?").concat(o):e.url,n=await fetch(r,s),i=n.headers.get("content-type")||"";let{responseType:a="text"}=n.ok?e:{};i.includes("application/json")&&(a="json");let l,u;switch(a){case"arraybuffer":case"blob":u=await n.blob(),l=await Me(u);break;case"json":l=await n.json();break;case"document":case"text":default:l=await n.text()}const g={};return n.headers.forEach((c,d)=>{g[d]=c}),{data:l,headers:g,status:n.status,url:n.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}j("CapacitorHttp",{web:()=>new We});var F;(function(t){t.Documents="DOCUMENTS",t.Data="DATA",t.Library="LIBRARY",t.Cache="CACHE",t.External="EXTERNAL",t.ExternalStorage="EXTERNAL_STORAGE"})(F||(F={}));var M;(function(t){t.UTF8="utf8",t.ASCII="ascii",t.UTF16="utf16"})(M||(M={}));const I=j("Filesystem",{web:()=>N(()=>import("./web-XypxX1qS.js"),__vite__mapDeps([0,1,2]),import.meta.url).then(t=>new t.FilesystemWeb)}),T=j("Toast",{web:()=>N(()=>import("./web-aWQnPTPu.js"),__vite__mapDeps([3,1,2]),import.meta.url).then(t=>new t.ToastWeb)});class Ne extends z{constructor(){super(...arguments),this.ERROR_PICK_FILE_CANCELED="pickFiles canceled."}async checkPermissions(){throw this.unimplemented("Not implemented on web.")}async convertHeicToJpeg(e){throw this.unimplemented("Not implemented on web.")}async pickFiles(e){const s=await this.openFilePicker(e);if(!s)throw new Error(this.ERROR_PICK_FILE_CANCELED);const o={files:[]};for(const r of s){const n={blob:r,modifiedAt:r.lastModified,mimeType:this.getMimeTypeFromUrl(r),name:this.getNameFromUrl(r),path:void 0,size:this.getSizeFromUrl(r)};e!=null&&e.readData&&(n.data=await this.getDataFromFile(r)),o.files.push(n)}return o}async pickDirectory(){throw this.unimplemented("Not implemented on web.")}async pickImages(e){return this.pickFiles(Object.assign({types:["image/*"]},e))}async pickMedia(e){return this.pickFiles(Object.assign({types:["image/*","video/*"]},e))}async pickVideos(e){return this.pickFiles(Object.assign({types:["video/*"]},e))}async requestPermissions(e){throw this.unimplemented("Not implemented on web.")}async openFilePicker(e){var s;const o=((s=e==null?void 0:e.types)===null||s===void 0?void 0:s.join(","))||"",r=(e==null?void 0:e.limit)===void 0?0:e.limit;return new Promise(n=>{let i=!1;const a=document.createElement("input");a.type="file",a.accept=o,a.multiple=r===0,a.addEventListener("change",()=>{i=!0;const l=Array.from(a.files||[]);n(l)},{once:!0}),window.addEventListener("focus",async()=>{await this.wait(1e3),!i&&n(void 0)},{once:!0}),a.click()})}async getDataFromFile(e){return new Promise((s,o)=>{const r=new FileReader;r.readAsDataURL(e),r.onload=()=>{const a=(typeof r.result=="string"?r.result:"").split("base64,")[1]||"";s(a)},r.onerror=n=>{o(n)}})}getNameFromUrl(e){return e.name}getMimeTypeFromUrl(e){return e.type}getSizeFromUrl(e){return e.size}async wait(e){return new Promise(s=>setTimeout(s,e))}}const ze=j("FilePicker",{web:()=>new Ne}),Ke=j("Share",{web:()=>N(()=>import("./web-0pFpBG5o.js"),__vite__mapDeps([4,1,2]),import.meta.url).then(t=>new t.ShareWeb)}),Ge={name:"vue-exportar-file-mixin",methods:{async filePicker(){if(D.isNativePlatform()){const t=await ze.pickFiles({types:["public.json"]});if(!t||!t.files||!t.files.length)throw new Error("Nenhum arquivo selecionado");return await I.readFile({path:t.files[0].path,encoding:M.UTF8})}else return new Promise((t,e)=>{const s=document.createElement("input");s.type="file",s.accept=".json",s.addEventListener("change",o=>{const r=o.target.files[0];if(!r){e(new Error("Nenhum arquivo selecionado."));return}const n=new FileReader;n.onload=({target:{result:i}})=>{try{const a=JSON.parse(i);t({data:JSON.stringify(a)})}catch(a){e(new Error("Erro ao analisar JSON"))}},n.onerror=()=>{e(new Error("Erro ao ler o arquivo"))},n.readAsText(r)}),s.click()})},async importar(){try{const t=await this.filePicker();if(!t||!t.data)throw new Error("Nenhum dado encontrado no arquivo");console.log(t.data);const e=JSON.parse(t.data),s=O("qSystemLogs")||[],o=[];s.forEach(r=>{o.push(r)}),e.forEach(r=>{o.push(r)}),localStorage.setItem("qSystemLogs",JSON.stringify(o)),this.cachePacks=o,await T.show({text:"Importação realizada com sucesso!",duration:"short"})}catch(t){await T.show({text:"Erro na importação: "+t.message,duration:"long"})}},async perguntaComoExportar(t,e){return new Promise(s=>{fe.create({header:t,buttons:[{text:e[0],handler:()=>{s("json")}},{text:e[1],handler:()=>{s("csv")}}]}).then(o=>o.present())})},async exportar(t){await this.perguntaComoExportar("".concat(this.$t("exportHeader")),["".concat(this.$t("exportJson")),"".concat(this.$t("exportCsv"))])==="csv"?await this.exportCsv(t):await this.exportJson(t)},async exportJson(t){try{const e=t===null?O("qSystemLogs"):[O("qSystemLogs")[t]],s=JSON.stringify(e,null,4),r=new Date().toISOString().replace(/[:.]/g,"-").replace("T","_").replace("Z",""),n="qSystemLogs_".concat(t,"_").concat(r,".json");await this.writeFile(n,s,"application/json")}catch(e){await T.show({text:"Erro: "+this.$t(e.message),duration:"long"})}},async writeFile(t,e,s){if(D.isNativePlatform())try{const o="qSystemLogs_exports",r="".concat(o,"/").concat(t);await this.ensureDirectoryExists(o),await I.writeFile({path:r,data:e,directory:F.Documents,encoding:M.UTF8});const n=await I.getUri({path:r,directory:F.Documents});await Ke.share({title:"Exportar Arquivo",files:[n.uri],dialogTitle:"Salvar em..."})}catch(o){await T.show({text:"Erro: ".concat(o.message),duration:"long"})}else{const o=new Blob([e],{type:s}),r=URL.createObjectURL(o),n=document.createElement("a");n.href=r,n.download=t,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(r)}},async ensureDirectoryExists(t){try{await I.readdir({path:t,directory:F.Documents})}catch(e){if(e.message.includes("does not exist"))await I.mkdir({path:t,directory:F.Documents,recursive:!0});else throw e}},async exportCsv(t){try{const e=t===null?O("qSystemLogs"):[O("qSystemLogs")[t]],s=this.makeCsv(e,t),r=new Date().toISOString().replace(/[:.]/g,"-").replace("T","_").replace("Z",""),n="qSystemLogs_".concat(t,"_").concat(r,".csv");await this.writeFile(n,s,"text/csv")}catch(e){await T.show({text:"Erro ao exportar CSV: "+e.message,duration:"long"})}},makeCsv(t){const e=[],s=["pack","log","data","n_joints_X","n_joints_y","n_joints_z","jv","rqd","jn","ja","jw","srf","esr","tunel_span","span/esr","q","class"];return e.push(s),t.forEach(o=>{o.logs.forEach(r=>{e.push([o.title,r.titleValue,r.dateValue,r.jvXValue,r.jvYValue,r.jvZValue,r.jvValue,r.rqdValue,r.jnValue,r.jaValue,r.jwValue,r.srfValue,r.esrValue,r.tunelSpanValue,r.dimEquiValue,r.qValue,r.classeRocha.split(":")[1]])})}),e.map(o=>o.join(",")).join("\n")}}},Xe={name:"vue-packs-view",components:{VuePackCard:Te,IonButton:we},mixins:[Ge],data(){return{cachePacks:[]}},created(){try{this.cachePacks=O("qSystemLogs")}catch(t){console.log("falha 'created' cachPacks em PacksPage")}},updated(){try{this.cachePacks=O("qSystemLogs")}catch(t){console.log("falha 'updated' cachPacks em PacksPage")}},methods:{openLogs(t){var s;const e=this.cachePacks;e[t].logs=(s=e[t].logs)!=null?s:[],ge("qSystemLogs",e),this.$store.dispatch("changePackAtual",t),this.$router.push("/tabs/logs")},removeLocal(t){typeof Storage<"u"&&localStorage.setItem("qSystemLogs",JSON.stringify(t))},configurarCard(t){this.$store.dispatch("changePackAtual",t),this.$router.push("/tabs/packSettings")},async removerCard(t){await ye()&&(this.cachePacks.splice(t,1),this.removeLocal(this.cachePacks))}}},Ze={class:"button-container-packs-page"};function Ye(t,e,s,o,r,n){const i=E("VuePackCard"),a=E("IonButton"),l=E("vue-base-layout");return w(),W(l,{pageProp:"",headerTitleProp:"tituloPacksPage"},{default:$(()=>[(w(!0),_(be,null,ve(r.cachePacks,(u,g)=>(w(),W(i,{id:"card-".concat(g),class:"card-logs",key:g,idProp:"".concat(g),valuesProp:u,onExportarLogs:t.exportar,onOpenLogs:n.openLogs,onDeletarCard:n.removerCard,onConfigurarCard:n.configurarCard},null,8,["id","idProp","valuesProp","onExportarLogs","onOpenLogs","onDeletarCard","onConfigurarCard"]))),128)),k(a,{onClick:e[0]||(e[0]=u=>n.configurarCard("novo"))},{default:$(()=>[Q(b(t.$t("novoPack")),1)]),_:1}),m("div",Ze,[m("button",{id:"export-button",class:"button-packs-page",onClick:e[1]||(e[1]=u=>t.exportar(null))},b(t.$t("export")),1),m("button",{id:"import-button",class:"button-packs-page",onClick:e[2]||(e[2]=u=>t.importar())},b(t.$t("importJson")),1)])]),_:1})}const Qe=Y(Xe,[["render",Ye],["__scopeId","data-v-f99b86f5"]]),tt=Object.freeze(Object.defineProperty({__proto__:null,default:Qe},Symbol.toStringTag,{value:"Module"}));export{M as E,tt as P,z as W,Je as b};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["./web-XypxX1qS.js","./index-FvCZzgjW.js","./index-BFSoC255.css","./web-aWQnPTPu.js","./web-0pFpBG5o.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}